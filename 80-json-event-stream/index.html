<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>JSON Event stream example</title>
        <script src="jquery-2.1.3.min.js"></script>
        <script src="angular.min.js"></script>
        <link href="bootstrap.min.css" rel="stylesheet"/>
        <!--  -->
    </head>
    <body>


        <div class="navbar navbar-default navbar-static-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Mega map</a>
                </div>
            </div>
        </div>


        <div class="container">
            <form class="form-horizontal">
                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-2 control-label">Longitude</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="lon">
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputPassword3" class="col-sm-2 control-label">Latitude</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="lat">
                    </div>
                </div>
            </form>
        </div>

        <script>
         var source = new EventSource('http://l:6788/api');

         source.addEventListener('message', function(e) {
             var data = JSON.parse(e.data);
              //{"Altitude":-97,"Latitude":37.819929,"Longitude":-122.478255}
             $("#lon").val(data.Longitude);
             $("#lat").val(data.Latitude);

         }, false);

         source.addEventListener('open', function(e) {
             console.log(e);
         }, false);

         source.addEventListener('error', function(e) {
             if (e.readyState == EventSource.CLOSED) {
                 // Connection was closed.
             }

             console.log(e);
         }, false);


        </script>

    </body>
</html>
